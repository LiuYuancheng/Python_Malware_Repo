# Backdoor Trojan System

![](img/logo.png)

We want to build a Backdoor trojan system which contents a watch dog protected backdoor trojan, a peer to peer signal trojan controller and a multiple trojans control hub system for :

1. **Education** at any level of cyber security course about trojan and system laboratory assignment / demo. 
2. **Training** for company employees, semi-professionals trojan attack and defense  workshop. 
3. **Development or cluster management** for cluster admin to remote manage cloud computing infra (with out using credentials ).
4. **Testing** for the security solution program / malware detection program to detect the trojan.
5. **Research** in cluster network unusual traffic detection, trojan detection, risk respond,  penetration action detection.

[TOC]

------

### Introduction

The Trojan system contents 3 main programs:

1. One **Backdoor Trojan** program running on victim open a backdoor to allow hacker to remote run commands, steal credential files, do harmful action to the host computer or  insert other malware on a host without authorize. 
2. One **Peer to Peer Trojan Connector**  which is a console based peer to peer direct connection program for hacker used to remote control one of the backdoor trojan to do the harmful action such as rename all user's file, use garbage files full fill user's home folder. It allows multiple hackers to control one trojan. 
3. One **Trojans Controller Hub** which is a UI based trojan management hub used for hacker to manage multiple trojan in different victim host or batch launch attack such as clear all file in every victim computer's home folder. It allows one hacker control multiple trojans.

The system relation diagram is shown below:

![](img/System_diagram.png)

`version v0.1.2`



------

### Program Design

##### Backdoor Trojan

The backdoor trojan will contents 4 main parts: 

- A process watch dog to protect itself to avoid user stop the trojan by killing its process. 
- A function actor implement detailed hacker's tasks such as run command , execute harmful action, do file transfer and injection, log user's keyboard input.
- A UDP server to handle the remote control request from Trojan connector and reply with the tasks execute result. 
- A UDP client to report to Trojan control hub,  pull down the tasks assigned to it from the hub and report the tasks execution result back to hub.

Before hacker use valid active code to active the trojan, it will under silence mode: before active the trojan will not response to any request to the victim machine, so the network security people will not find the backdoor service if they Nmap scan the victimâ€™s network service. 

The backdoor trojan program work flow is shown below:

![](img/workflow.png)



##### Trojan Connector

The P2P Trojan connector is a console based peer to peer direct connection program for hacker to remote control one of the backdoor trojan to do the harmful action such as rename all user's file, use garbage files full fill user's home folder. It supports multiple hackers work together to control one trojan. As it need to send the handshake to the target trojan, so the connector need to be in the same subnet of the victim host.

The Trojan and multiple trojan connector timing UML diagram is shown below:

![](img/Connector_timing.png)



##### Trojans Controller Hub

Trojans Controller Hub allows one hacker control multiple trojans, it will provide UI management interface for hacker to manage multiple trojan in different victim hosts to batch launch attack such as clear all file in every victim computer's home folder. If a backdoor trojan's report mode flag is set to true, it will try to register itself to the Trojans Controller Hub regularly in low frequency. Once registration accepted, the trojan will repeat fetch task from the tasks from hub to execute under higher frequency. 

The Trojans and trojan controller hub timing UML diagram is shown below:

![](img/controller_timing.png)

Trojan control hub UI view:

![](img/execute.png)

Run the windows cmd `ipconfig` on victim host which "Trojan-ID:1099".



------

#### Program Setup

###### Development Environment : python 3.7.4+

