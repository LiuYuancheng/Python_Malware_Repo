## DDoS Attack Management System

The distributed denial-of-service (DDoS) attack is a malicious attempt to disrupt the normal traffic of a targeted server, service or network by overwhelming the target or its surrounding infrastructure with a flood of Internet traffic. It is a kind of very common and simple attack vector which hackers will use to compromise the victim's network service (such as a website). We want to create a multi-threads service / app layer DDoS attack emulation and management system which can parallel generate hundreds of network requests to one target ( such as SSH, http get/post, UDP, TCP, Modbus ... ) during a time interval. The DDoS attack management can be applied for below purpose : 

1. **Education and Training** : Used for any level of cyber security course about DDoS attack or the related course lab assignment / demo. 
2. **Service stress testing or Penetration testing : **Used for simulate large amount of users to access the target service to do the stress testing or do some penetration test task such as brute force to break web login username / password . 
3. **Attack simulation** : Used for red team to launch DDoS attack in cyber exercise. 
4. **Research** : Used for DDoS attack research such as attack identify, tracing, detection and defense. 

[TOC]

------

### Introduction 

DDoS attacks achieve effectiveness by utilizing multiple compromised computer systems as sources of attack traffic. Exploited machines can include computers and other networked resources such as [IoT devices](https://www.cloudflare.com/learning/ddos/glossary/internet-of-things-iot/). We want to create a distributed DDoS attack launch system which contents one DDoS attack actors repository, several DDoS attackers and one attack control hub.

![](../../doc/img/ddos/system.png)

1. The **DDoS Attacker** program is running on single nodes with an attack thread pool to start several hundreds of parallel threads to implement the attack at the same time based on the user's config. Currently we provide 10 different categories service attack actors and user can also easily plug their customized attack program in the attacker.
2. The **DDoS Attack Actors** **Repository** contents several attack actor to send different kinds of network request (such SSH, https-GET, https-POST, SMB login...) to the target. Each attack actor object will be assembled in a attack thread and put in to the attack pool of the related DDoS attacker.
3. The **DDos Control Hub** is used to link all the DDoS attackers together so the user can monitor the current attack state and control each DDoS attacker via the hub's web interface.



------

### System design

This session will introduce the detailed design of the DDoS Attacker, Attack Actor Repository , DDoS Attack Controller Hub.

#### DDoS Attacker Design

The DDoS attacker is the main program running on each node to implement the DDoS attack, the user can config the attack type, attack threads number and the attack start/stop time. The attacker will have a thread pool, each attack actor need to be assembled in a attack thread then running parallel in the pool. The DDoS attacker system work flow is shown below :

![](../../doc/img/ddos/workflow.png)

Version `v1.0.2`

Each DDoS Attacker will also report its current attack state to the control hub regularly and fetch the user's control request. The user can start / pause each DDoS attacker's attack process from the hub. Each Attacker will have its local attack actor repository. During the initialization, the attacker will build its attack threads pool based on the loaded config file.



#### Attack Actors Repository Design 

The attack actors is the minimum functional unit which provides different network service probing function, connection handshake and request send & receive function. The repo contents different kinds of attack actors to send different kinds of network communication data. Currently we provide 10 different categories service attack actors. The main network communication functions provided by each attack actors are :

1. **SSH-ATK-Actor** : Provide normal SSH connection, commands execution, jump host / port forwarding with SSH tunneling, SCP file transfer.
2. **HTTP-ATK-Actor** : provide http/https web data fetch, GET / POST requests handling.
3. **NTP-ATK-Actor** : Send time synchronization request ( Network Time Protocol) to time server.
4. **FTP-ATK-Actor** : Send FTP server authorization, folder tree scan, file download and upload.
5. **TCP-ATK-Actor** : Establish TCP handshake , send data to TCP server.
6. **UDP-ATK-Actor** : Send data to UDP server.
7. **SMB-ATK-Actor** : Server Message Block authorization, connect to SMB server to upload / download file.
8. **Modbus-ATK-Actor** : Connect to Modbus device (PLC) to fetch PLC register state or change coils state.
9. **SMTP-ATK-Actor** : SMTP email server login, read email from inbox , send normal / junk email.
10. **POP3-ATK-Actor** : POP3 email server login, read email from inbox , send normal / junk email.



#### DDoS Attack Control Hub

All the DDoS Attacker will report its attack progress to the control hub and fetch the user's attack control request. The control hub will provide a web-UI to the user: 

![](../../doc/img/ddos/webUI.png)

The information contents : 

- Attacker ID : Each attack will have one unique ID to register to the control hub. 
- DDoS Type : The attack type ( what kind of attack actor hooked in the attacker ) . 
- Attacker Threads Num : Number of thread running in the attacker's thread pool. 
- DDoS count (/min) : The number of DDoS requests send every min. 
- Start time : The start time (HH:MM:SS) of the DDoS attack. ( `n.a` : if not set,  the DDoS attack will start immediately when the attack start to run )
- Stop time : The end time (HH:MM:SS) of the DDoS attack. (`n.a` : if not set,  the DDoS attack will not stop until attacker receive the pause request from the control hub)
- Target : the attack target. 
- Current State : the current progress. 
- Start Attack button : Press the button will start the DDoS attack immediately. 
- Stop Attack button : Press the button will pause the DDoS attack immediately. 



------

### System Use Case

##### Test case 1 : UDP DDoS attack on UDP server

![](../../doc/img/ddos/ddos_udp.png)

##### Test case 2 :  DDoS HTTPs attack send Post request 

![](../../doc/img/ddos/ddos_http_post.png)

##### Test case 3  : DDoS ModBus Tcp Attack on PLC in OT-Network 

![](../../doc/img/ddos/ddos_modbus.png)

![](../../doc/img/ddos/ddos_modbus2.png)



------

#### Problem and Solution

Refer to `doc/ProblemAndSolution.md`



------

> Last edit by LiuYuancheng(liu_yuan_cheng@hotmail.com) at 26/11/2023, if you have any problem, please send me a message. 