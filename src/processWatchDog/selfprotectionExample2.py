#!/usr/bin/python
#-----------------------------------------------------------------------------
# Name:        selfprotectionExample2.py
#
# Purpose:     This program is a test case of the process protector to show the 
#              user how 2 malwares use the processProtector to protect each other 
#              to avoid the user forse kill any one of them.
#
# Author:      Yuancheng Liu
#
# Version:     v_0.1
# Created:     2023/10/01
# Copyright:   n.a
# License:     n.a
#-----------------------------------------------------------------------------
import os
import processWatchDog

print("Current working directory is : %s" % os.getcwd())
dirpath = os.path.dirname(__file__)
print("Current source code location : %s" % dirpath)

tgtFile = os.path.join(dirpath, 'selfprotectionExample1.py')
rcdFile = os.path.join(dirpath, 'selfprotectRcd.txt')
targetInfo = {
    'path': tgtFile,    # target file path.
    # target file exeuction cmd
    'execution': 'python C:\\Works\\NCL\\Project\\Malware_Repo\\src\\processWatchDog\\selfprotectionExample1.py',  
    'backup': 'C:\\Works\\NCL\\Project\\Malware_Repo\\src\\processWatchDog\\recoveZips\\selfprotectionExample1.zip', # target program zip file
    'rcdIdx': 0 # configured id in record file.
}
ownIdx = 1
protector = processWatchDog.processWatchdog(targetInfo, rcdFile, idx=ownIdx)
protector.start()